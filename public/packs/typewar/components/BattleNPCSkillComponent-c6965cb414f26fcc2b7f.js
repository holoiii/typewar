!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=68)}({4:function(t,n,e){!function(){var e={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,n){var r="string"==typeof t.initial?{state:t.initial}:t.initial,i=t.terminal||t.final,a=n||t.target||{},o=t.events||[],u=t.callbacks||{},c={},s={},l=function(t){var n=Array.isArray(t.from)?t.from:t.from?[t.from]:[e.WILDCARD];c[t.name]=c[t.name]||{};for(var r=0;r<n.length;r++)s[n[r]]=s[n[r]]||[],s[n[r]].push(t.name),c[t.name][n[r]]=t.to||n[r];t.to&&(s[t.to]=s[t.to]||[])};r&&(r.event=r.event||"startup",l({name:r.event,from:"none",to:r.state}));for(var f=0;f<o.length;f++)l(o[f]);for(var v in c)c.hasOwnProperty(v)&&(a[v]=e.buildEvent(v,c[v]));for(var v in u)u.hasOwnProperty(v)&&(a[v]=u[v]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==c[t]&&(c[t].hasOwnProperty(this.current)||c[t].hasOwnProperty(e.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(s[this.current]||[]).concat(s[e.WILDCARD]||[])},a.isFinished=function(){return this.is(i)},a.error=t.error||function(t,n,e,r,i,a,o){throw o||a},a.states=function(){return Object.keys(s).sort()},r&&!r.defer&&a[r.event](),a},doCallback:function(t,n,r,i,a,o){if(n)try{return n.apply(t,[r,i,a].concat(o))}catch(n){return t.error(r,i,a,o,e.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",n)}},beforeAnyEvent:function(t,n,r,i,a){return e.doCallback(t,t.onbeforeevent,n,r,i,a)},afterAnyEvent:function(t,n,r,i,a){return e.doCallback(t,t.onafterevent||t.onevent,n,r,i,a)},leaveAnyState:function(t,n,r,i,a){return e.doCallback(t,t.onleavestate,n,r,i,a)},enterAnyState:function(t,n,r,i,a){return e.doCallback(t,t.onenterstate||t.onstate,n,r,i,a)},changeState:function(t,n,r,i,a){return e.doCallback(t,t.onchangestate,n,r,i,a)},beforeThisEvent:function(t,n,r,i,a){return e.doCallback(t,t["onbefore"+n],n,r,i,a)},afterThisEvent:function(t,n,r,i,a){return e.doCallback(t,t["onafter"+n]||t["on"+n],n,r,i,a)},leaveThisState:function(t,n,r,i,a){return e.doCallback(t,t["onleave"+r],n,r,i,a)},enterThisState:function(t,n,r,i,a){return e.doCallback(t,t["onenter"+i]||t["on"+i],n,r,i,a)},beforeEvent:function(t,n,r,i,a){if(!1===e.beforeThisEvent(t,n,r,i,a)||!1===e.beforeAnyEvent(t,n,r,i,a))return!1},afterEvent:function(t,n,r,i,a){e.afterThisEvent(t,n,r,i,a),e.afterAnyEvent(t,n,r,i,a)},leaveState:function(t,n,r,i,a){var o=e.leaveThisState(t,n,r,i,a),u=e.leaveAnyState(t,n,r,i,a);return!1!==o&&!1!==u&&(e.ASYNC===o||e.ASYNC===u?e.ASYNC:void 0)},enterState:function(t,n,r,i,a){e.enterThisState(t,n,r,i,a),e.enterAnyState(t,n,r,i,a)},buildEvent:function(t,n){return function(){var r=this.current,i=n[r]||(n[e.WILDCARD]!=e.WILDCARD?n[e.WILDCARD]:r)||r,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,r,i,a,e.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,r,i,a,e.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===e.beforeEvent(this,t,r,i,a))return e.Result.CANCELLED;if(r===i)return e.afterEvent(this,t,r,i,a),e.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=i,e.enterState(o,t,r,i,a),e.changeState(o,t,r,i,a),e.afterEvent(o,t,r,i,a),e.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,e.afterEvent(o,t,r,i,a)};var u=e.leaveState(this,t,r,i,a);return!1===u?(this.transition=null,e.Result.CANCELLED):e.ASYNC===u?e.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(n=t.exports=e),n.StateMachine=e}()},68:function(t,n,e){var r=e(4);Crafty.c("BattleNPCSkill",{_nPCSkillFsm:null,_skill:null,init:function(){},battleNPCSkill:function(t){if(!t)throw"ERROR: attempting to initialize NPCSkill component without any skill data";return this._skill=t,this._setupStateMachine(),this},activate:function(){this._nPCSkillFsm.activate()},getSkillDef:function(){return this._skill},isReady:function(){return this._nPCSkillFsm.is("ready")},prepare:function(){this._nPCSkillFsm.prepare()},_setupStateMachine:function(){this._nPCSkillFsm=r.create({initial:"ready",events:[{name:"activate",from:"ready",to:"cooling"},{name:"prepare",from:"cooling",to:"ready"}],callbacks:{onafteractivate:function(t,n,e){},onbeforeready:function(t,n,e){}}})}})}});