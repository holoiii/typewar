!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=69)}({4:function(t,n,e){!function(){var e={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,n){var r="string"==typeof t.initial?{state:t.initial}:t.initial,o=t.terminal||t.final,a=n||t.target||{},i=t.events||[],c=t.callbacks||{},u={},s={},f=function(t){var n=Array.isArray(t.from)?t.from:t.from?[t.from]:[e.WILDCARD];u[t.name]=u[t.name]||{};for(var r=0;r<n.length;r++)s[n[r]]=s[n[r]]||[],s[n[r]].push(t.name),u[t.name][n[r]]=t.to||n[r];t.to&&(s[t.to]=s[t.to]||[])};r&&(r.event=r.event||"startup",f({name:r.event,from:"none",to:r.state}));for(var l=0;l<i.length;l++)f(i[l]);for(var v in u)u.hasOwnProperty(v)&&(a[v]=e.buildEvent(v,u[v]));for(var v in c)c.hasOwnProperty(v)&&(a[v]=c[v]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(e.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(s[this.current]||[]).concat(s[e.WILDCARD]||[])},a.isFinished=function(){return this.is(o)},a.error=t.error||function(t,n,e,r,o,a,i){throw i||a},a.states=function(){return Object.keys(s).sort()},r&&!r.defer&&a[r.event](),a},doCallback:function(t,n,r,o,a,i){if(n)try{return n.apply(t,[r,o,a].concat(i))}catch(n){return t.error(r,o,a,i,e.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",n)}},beforeAnyEvent:function(t,n,r,o,a){return e.doCallback(t,t.onbeforeevent,n,r,o,a)},afterAnyEvent:function(t,n,r,o,a){return e.doCallback(t,t.onafterevent||t.onevent,n,r,o,a)},leaveAnyState:function(t,n,r,o,a){return e.doCallback(t,t.onleavestate,n,r,o,a)},enterAnyState:function(t,n,r,o,a){return e.doCallback(t,t.onenterstate||t.onstate,n,r,o,a)},changeState:function(t,n,r,o,a){return e.doCallback(t,t.onchangestate,n,r,o,a)},beforeThisEvent:function(t,n,r,o,a){return e.doCallback(t,t["onbefore"+n],n,r,o,a)},afterThisEvent:function(t,n,r,o,a){return e.doCallback(t,t["onafter"+n]||t["on"+n],n,r,o,a)},leaveThisState:function(t,n,r,o,a){return e.doCallback(t,t["onleave"+r],n,r,o,a)},enterThisState:function(t,n,r,o,a){return e.doCallback(t,t["onenter"+o]||t["on"+o],n,r,o,a)},beforeEvent:function(t,n,r,o,a){if(!1===e.beforeThisEvent(t,n,r,o,a)||!1===e.beforeAnyEvent(t,n,r,o,a))return!1},afterEvent:function(t,n,r,o,a){e.afterThisEvent(t,n,r,o,a),e.afterAnyEvent(t,n,r,o,a)},leaveState:function(t,n,r,o,a){var i=e.leaveThisState(t,n,r,o,a),c=e.leaveAnyState(t,n,r,o,a);return!1!==i&&!1!==c&&(e.ASYNC===i||e.ASYNC===c?e.ASYNC:void 0)},enterState:function(t,n,r,o,a){e.enterThisState(t,n,r,o,a),e.enterAnyState(t,n,r,o,a)},buildEvent:function(t,n){return function(){var r=this.current,o=n[r]||(n[e.WILDCARD]!=e.WILDCARD?n[e.WILDCARD]:r)||r,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,r,o,a,e.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,r,o,a,e.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===e.beforeEvent(this,t,r,o,a))return e.Result.CANCELLED;if(r===o)return e.afterEvent(this,t,r,o,a),e.Result.NOTRANSITION;var i=this;this.transition=function(){return i.transition=null,i.current=o,e.enterState(i,t,r,o,a),e.changeState(i,t,r,o,a),e.afterEvent(i,t,r,o,a),e.Result.SUCCEEDED},this.transition.cancel=function(){i.transition=null,e.afterEvent(i,t,r,o,a)};var c=e.leaveState(this,t,r,o,a);return!1===c?(this.transition=null,e.Result.CANCELLED):e.ASYNC===c?e.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(n=t.exports=e),n.StateMachine=e}()},69:function(t,n,e){var r=e(4);Crafty.c("BattleStance",{init:function(){},battleStance:function(t){return this._setupModeFSM(t),this},getStance:function(){return this._stance.current},isStance:function(t){return this._stance.is(t)},toggleStance:function(){return this._stance.toggle(),this.getStance()},_setupModeFSM:function(t){var n;n=t||"defense",this._stance=r.create({initial:n,events:[{name:"toggle",from:"defense",to:"offense"},{name:"toggle",from:"offense",to:"defense"}],callbacks:{}})}})}});